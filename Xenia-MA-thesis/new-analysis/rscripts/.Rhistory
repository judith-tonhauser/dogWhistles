# set language to English
Sys.setlocale("LC_ALL", "en_US.UTF-8")
# set working directory to directory of script
this.dir <- dirname(rstudioapi::getSourceEditorContext()$path)
setwd(this.dir)
# load relevant packages and set background color
library(tidyverse)
theme_set(theme_bw())
# load the data
ndwlib = read_csv(file="../data/ndwlib.csv")
nrow(ndwlib) #35
names(ndwlib)
ndwcons = read_csv(file="../data/ndwcons.csv")
nrow(ndwcons) #35
names(ndwcons)
dwlib = read_csv(file="../data/dwlib.csv")
nrow(dwlib) #35
dwcons = read_csv(file="../data/dwcons.csv")
nrow(dwcons) #35
# add information about the condition to the files
ndwlib = ndwlib %>%
mutate(dw = "no") %>%
mutate(preregistered = "liberal") %>%
mutate("criticalQuestion" = `Some people want to increase spending for new prisons to lock up domestic abusers. Others would rather spend this money on education programs for women, in order to help them identify early warning signs of abusive partnerships and to prevent domestic abuse.\n\nWhat about you? If you had to choose, would you rather see this money spent on building new prisons or education programs?`) %>%
select(-c(`Some people want to increase spending for new prisons to lock up domestic abusers. Others would rather spend this money on education programs for women, in order to help them identify early warning signs of abusive partnerships and to prevent domestic abuse.\n\nWhat about you? If you had to choose, would you rather see this money spent on building new prisons or education programs?`))
ndwcons = ndwcons %>%
mutate(dw = "no") %>%
mutate(preregistered = "cons") %>%
mutate("criticalQuestion" = `Some people want to increase spending for new prisons to lock up domestic abusers. Others would rather spend this money on education programs for women, in order to help them identify early warning signs of abusive partnerships and to prevent domestic abuse.\n\nWhat about you? If you had to choose, would you rather see this money spent on building new prisons or education programs?`) %>%
select(-c(`Some people want to increase spending for new prisons to lock up domestic abusers. Others would rather spend this money on education programs for women, in order to help them identify early warning signs of abusive partnerships and to prevent domestic abuse.\n\nWhat about you? If you had to choose, would you rather see this money spent on building new prisons or education programs?`))
dwlib = dwlib %>%
mutate(dw = "yes") %>%
mutate(preregistered = "liberal") %>%
mutate("criticalQuestion" = `Some people want to increase spending for new prisons to lock up domestic abusers.  Others would rather spend this money on education programs for adult human females, in order to help them identify early warning signs of abusive partnerships and to prevent domestic abuse.\n\nWhat about you? If you had to choose, would you rather see this money spent on building new prisons or education programs?`) %>%
select(-c(`Some people want to increase spending for new prisons to lock up domestic abusers.  Others would rather spend this money on education programs for adult human females, in order to help them identify early warning signs of abusive partnerships and to prevent domestic abuse.\n\nWhat about you? If you had to choose, would you rather see this money spent on building new prisons or education programs?`))
dwcons = dwcons %>%
mutate(dw = "yes") %>%
mutate(preregistered = "cons") %>%
mutate("criticalQuestion" = `Some people want to increase spending for new prisons to lock up domestic abusers.  Others would rather spend this money on education programs for adult human females, in order to help them identify early warning signs of abusive partnerships and to prevent domestic abuse.\n\nWhat about you? If you had to choose, would you rather see this money spent on building new prisons or education programs?`) %>%
select(-c(`Some people want to increase spending for new prisons to lock up domestic abusers.  Others would rather spend this money on education programs for adult human females, in order to help them identify early warning signs of abusive partnerships and to prevent domestic abuse.\n\nWhat about you? If you had to choose, would you rather see this money spent on building new prisons or education programs?`))
# bind the data
d = rbind(ndwlib,ndwcons,dwlib,dwcons)
nrow(d) #140
# replace timestamp with participant ID
colnames(d)[1] <- "participantID" # rename the column
d$participantID <- match(d$participantID, unique(d$participantID)) # assign unique IDs
table(d$participantID)
# rename the columns
colnames(d)[2] <- "feelStrongly"
colnames(d)[3] <- "transConfused"
colnames(d)[4] <- "transMentallyIll"
colnames(d)[5] <- "transDangerous"
colnames(d)[6] <- "transFrauds"
colnames(d)[7] <- "transUnnatural"
colnames(d)[8] <- "cisConfused"
colnames(d)[9] <- "cisMentallyIll"
colnames(d)[10] <- "cisDangerous"
colnames(d)[11] <- "cisFrauds"
colnames(d)[12] <- "cisUnnatural"
colnames(d)[13] <- "genderFairnessApartment"
colnames(d)[14] <- "genderFairnessSports"
colnames(d)[15] <- "genderFairnessStreetHarassment"
colnames(d)[16] <- "genderFairnessBullying"
colnames(d)[17] <- "generalFairnessEducation"
colnames(d)[18] <- "generalFairnessHealthcare"
colnames(d)[19] <- "fearNumberTrans"
colnames(d)[20] <- "fearComparisonProblems"
colnames(d)[21] <- "equalityEqualChance"
colnames(d)[22] <- "equalityShouldntWorry"
colnames(d)[23] <- "participantAge"
colnames(d)[24] <- "participantSexualOrientation"
colnames(d)[25] <- "participantGender"
colnames(d)[26] <- "participantCisOrTrans"
# recode, following H&P, the response to the critical question as a four-point scale
d <- d %>%
mutate(targetResponse = case_when(
criticalQuestion == "Building new prisons" & feelStrongly == "I feel very strongly about this." ~ 1,
criticalQuestion == "Building new prisons" & feelStrongly == "I feel not very strongly about this." ~ 2,
criticalQuestion == "Education programs" & feelStrongly == "I feel not very strongly about this." ~ 3,
criticalQuestion == "Education programs" & feelStrongly == "I feel very strongly about this." ~ 4,
TRUE ~ 666 # Assign NA for any unmatched cases
))
d %>%
select(participantID,criticalQuestion) %>%
unique() %>%
group_by(criticalQuestion) %>%
summarize(count=n())
d %>%
select(participantID,targetResponse) %>%
unique() %>%
group_by(targetResponse) %>%
summarize(count=n())
str(d)
# calculate each participant's trans stereotype index (following H&P's black stereotype index from 5 to 35)
d <- d %>%
mutate(transStereotypeIndex = rowSums(select(.,
transConfused,
transMentallyIll,
transDangerous,
transFrauds,
transUnnatural)))
# calculate each participant's cis stereotype index (following H&P's white stereotype index from 5 to 35)
d <- d %>%
mutate(cisStereotypeIndex = rowSums(select(.,
cisConfused,
cisMentallyIll,
cisDangerous,
cisFrauds,
cisUnnatural)))
# calculate each participant's gender fairness index (following H&P's racial fairness index from 4 to 23)
# by summing up the relevant columns after changing them to the appropriate values
str(d$genderFairnessApartment) #chr change yes/no to 1/2
d <- d %>%
mutate(genderFairnessApartmentNum = case_when(
genderFairnessApartment == "Yes" ~ 1,
genderFairnessApartment == "No" ~ 2,
TRUE ~ 666))
str(d$genderFairnessSports) #num change 7-1 to 1-7
table(d$genderFairnessSports)
d$genderFairnessSports = 8-d$genderFairnessSports
table(d$genderFairnessSports)
str(d$genderFairnessStreetHarassment) #num change 7-1 to 1-7
d$genderFairnessStreetHarassment = 8-d$genderFairnessStreetHarassment
str(d$genderFairnessBullying) #num change 7-1 to 1-7
d$genderFairnessBullying = 8-d$genderFairnessBullying
d <- d %>%
mutate(genderFairnessIndex = rowSums(select(.,
genderFairnessApartmentNum,
genderFairnessSports,
genderFairnessStreetHarassment,
genderFairnessBullying)))
# calculate general fairness index (following H&P's general fairness score from 2 to 8)
str(d$generalFairnessEducation)
d <- d %>%
mutate(generalFairnessEducationNum = case_when(
generalFairnessEducation == "Strongly agree" ~ 1,
generalFairnessEducation == "Somewhat agree" ~ 2,
generalFairnessEducation == "Somewhat disagree" ~ 3,
generalFairnessEducation == "Strongly disagreee" ~ 4,
TRUE ~ 666))
table(d$generalFairnessEducation)
table(d$generalFairnessEducationNum)
str(d$generalFairnessHealthcare)
d <- d %>%
mutate(generalFairnessHealthcareNum = case_when(
generalFairnessHealthcare == "Strongly agree" ~ 1,
generalFairnessHealthcare == "Somewhat agree" ~ 2,
generalFairnessHealthcare == "Somewhat disagree" ~ 3,
generalFairnessHealthcare == "Strongly disagreee" ~ 4,
TRUE ~ 666))
table(d$generalFairnessHealthcare)
table(d$generalFairnessHealthcareNum)
d <- d %>%
mutate(generalFairnessIndex = rowSums(select(.,
generalFairnessEducationNum,
generalFairnessHealthcareNum)))
table(d$generalFairnessIndex)
# calculate fear of trans people score (following H&P's fear of crime score from 2 to 6)
str(d$fearNumberTrans)
d <- d %>%
mutate(fearNumberTransNum = case_when(
fearNumberTrans == "The number of trans people increased" ~ 3,
fearNumberTrans == "The number of trans people stayed about the same" ~ 2,
fearNumberTrans == "The number of trans people decreased" ~ 1,
TRUE ~ 666))
table(d$fearNumberTrans)
table(d$fearNumberTransNum)
str(d$fearComparisonProblems)
str(d$fearComparisonProblems)
d <- d %>%
mutate(fearComparisonProblemsNum = case_when(
fearComparisonProblems == "It is the most important problem" ~ 1,
fearComparisonProblems == "It is no more important than other problems" ~ 2,
fearComparisonProblems == "It is less important than other problems" ~ 3,
TRUE ~ 666))
table(d$fearComparisonProblems)
table(d$fearComparisonProblemsNum)
d <- d %>%
mutate(fearOfTransPeopleIndex = rowSums(select(.,
fearNumberTransNum,
fearComparisonProblemsNum)))
table(d$fearOfTransPeopleIndex)
# calculate fear of trans people score (following H&P's fear of crime score from 2 to 6)
# here there's a difference to H&P
# the impression that the number of trans people increased doesn't mean that one also fears trans people
# whereas H&P's impression that crime has increased means that the participant fears crime
# so it might be better to not call this score the "fear of trans people" score, but rather
# "awareness of trans people and issues"
str(d$fearNumberTrans)
table(d$fearOfTransPeopleIndex)
d$awarenessOfTransPeopleAndIssues = d$fearOfTransPeopleIndex
str(d$equalityEqualChance) #chr change to num 4-1
d <- d %>%
mutate(equalityEqualChanceNum = case_when(
equalityEqualChance == "Strongly agree" ~ 4,
equalityEqualChance == "Somewhat agree" ~ 3,
equalityEqualChance == "Somewhat disagree" ~ 2,
equalityEqualChance == "Strongly disagree" ~ 1,
TRUE ~ 666))
table(d$equalityEqualChance)
table(d$equalityEqualChanceNum)
str(d$equalityShouldntWorry) #chr change to num 1-4
d <- d %>%
mutate(equalityShouldntWorryNum = case_when(
equalityShouldntWorry == "Strongly agree" ~ 1,
equalityShouldntWorry == "Somewhat agree" ~ 2,
equalityShouldntWorry == "Somewhat disagree" ~ 3,
equalityShouldntWorry == "Strongly disagree" ~ 4,
TRUE ~ 666))
table(d$equalityShouldntWorry)
table(d$equalityShouldntWorryNum)
d <- d %>%
mutate(equalityIndex = rowSums(select(.,
equalityEqualChanceNum,
equalityShouldntWorryNum)))
table(d$equalityIndex)
table(d$equalityIndex)
# calculate transAttitudeIndex (not in H&P, from 11 to 64)
d <- d %>%
mutate(transAttitudeIndex = rowSums(select(.,
transStereotypeIndex,
genderFairnessIndex,
fearOfTransPeopleIndex)))
table(d$transAttitudeIndex)
# calculate attitudeControlIndex (not in H&P, from 4 to 16)
d <- d %>%
mutate(attitudeControlIndex = rowSums(select(.,
generalFairnessIndex,
equalityIndex)))
table(d$attitudeControlIndex)
ggplot(d, aes(transStereotypeIndex)) +
geom_histogram()
table(d$transStereotype)
table(d$transStereoType)
names(d)
table(d$transStereotypeIndex)
table(d$transStereotypeIndex,d$participantID)
table(d$participantID,d$transStereotypeIndex)
view(d$participantID,d$transStereotypeIndex)
view(table(d$participantID,d$transStereotypeIndex))
table(d$participantID,d$transStereotypeIndex)
max.print=200
table(d$participantID,d$transStereotypeIndex)
options(max.print=1000)
table(d$participantID,d$transStereotypeIndex)
options(max.print=1000, table(d$participantID,d$transStereotypeIndex))
table(d$participantID,d$transStereotypeIndex)
d[d$participantID < 11,]$transStereotypeIndex
table(d[d$participantID < 11,]$transStereotypeIndex)
table(d$transStereotypeIndex)
table(d$transStereotypeIndex)
nrow(d)
proportion = d %>%
group_by(transStereotypeIndex) %>%
summarize(n = n()) %>%
mutate(prop = n / sum(n))
proportion
table(d$criticalQuestion)
table(d$transStereotypeIndex,d$criticalQuestion)
A.tmp <- as.data.frame(table(d$transStereotypeIndex,d$criticalQuestion))
A.tmp
A.tmp <- as.data.frame.matrix(table(d$transStereotypeIndex,d$criticalQuestion))
A.tmp
names(A.tmo)
names(A.tmp)
# add a proportion column
A.tmp$prop = A.tmp$`Building new prisons` / (A.tmp$`Building new prisons` + A.tmp$`Education programs`)
A.tmp
table(d$dw)
# create a new data frame with the relevant information
A.tmp <- as.data.frame.matrix(table(d$transStereotypeIndex,d$criticalQuestion,d$dw))
table(d$transStereotypeIndex,d$criticalQuestion,d$dw)
# create a new data frame with the relevant information
A.tmp <- as.data.frame.matrix(table(d$transStereotypeIndex,d$criticalQuestion))
A.tmp
# create a new data frame with the relevant information
A.tmp.dw <- as.data.frame.matrix(table(d[d$dw == "yes",]$transStereotypeIndex,d[d$dw == "yes",]$criticalQuestion))
A.tmp.dw
# add a proportion column
A.tmp.dw$prop = A.tmp.dw$`Building new prisons` / (A.tmp.dw$`Building new prisons` + A.tmp.dw$`Education programs`)
A.tmp.dw
# create a new data frame with the relevant information, for participants who didn't get the dw
A.tmp.ndw <- as.data.frame.matrix(table(d[d$dw == "no",]$transStereotypeIndex,d[d$dw == "no",]$criticalQuestion))
A.tmp.ndw
# create a new data frame with the relevant information, for participants who didn't get the dw
A.tmp.ndw <- as.data.frame.matrix(table(d[d$dw == "no",]$transStereotypeIndex,d[d$dw == "no",]$criticalQuestion))
A.tmp.ndw
# add a proportion column
A.tmp.ndw$prop = A.tmp.ndw$`Building new prisons` / (A.tmp.ndw$`Building new prisons` + A.tmp.ndw$`Education programs`)
A.tmp.ndw
names(A.tmp.dw)
# give the first column a name
A.tmp.dw$transStereotypeIndex <- rownames(A.tmp.dw)
A.tmp.dw
view(A.tmp.dw)
# create a new data frame with the relevant information, for participants who got the dw
A.tmp.dw <- as.data.frame.matrix(table(d[d$dw == "yes",]$transStereotypeIndex,d[d$dw == "yes",]$criticalQuestion))
A.tmp.dw
# give the first column a name
A.tmp.dw$transStereotypeIndex <- rownames(A.tmp.dw)
# add a proportion column
A.tmp.dw$prop = A.tmp.dw$`Building new prisons` / (A.tmp.dw$`Building new prisons` + A.tmp.dw$`Education programs`)
# create a new data frame with the relevant information, for participants who didn't get the dw
A.tmp.ndw <- as.data.frame.matrix(table(d[d$dw == "no",]$transStereotypeIndex,d[d$dw == "no",]$criticalQuestion))
A.tmp.ndw
# give the first column a name
A.tmp.ndw$transStereotypeIndex <- rownames(A.tmp.ndw)
# add a proportion column
A.tmp.ndw$prop = A.tmp.ndw$`Building new prisons` / (A.tmp.ndw$`Building new prisons` + A.tmp.ndw$`Education programs`)
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_point()
unique(A.tmp.dw$transStereotypeIndex)
levels = unique(A.tmp.dw$transStereotypeIndex)
# sort the transStereotypeIndex column by value
A.tmp.dw$transStereotypeIndex <- factor(A.tmp.dw$transStereotypeIndex, levels = unique(A.tmp.dw$transStereotypeIndex))
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_point()
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_line()
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_point()
ggplot(aes(x=transStereotypeIndex, y=prop)) +
geom_point(data=A.tmp.dw) +
geom_point(data=A.tmp.ndw)
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_point() +
geom_point(data=A.tmp.ndw)
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_point() +
geom_point(data=A.tmp.ndw, color = "red")
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_point() +
geom_smooth() +
geom_point(data=A.tmp.ndw, color = "red")
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_point() +
geom_smooth() +
geom_point(data=A.tmp.ndw, color = "red")
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_point() +
geom_smooth(color = "blue") +
geom_point(data=A.tmp.ndw, color = "red")
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_point() +
geom_smooth(color = "blue")
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_point() +
geom_smooth()
ggplot(data=A.tmp.dw, aes(x=transStereotypeIndex, y=prop)) +
geom_point() +
geom_smooth(method = "loess")
